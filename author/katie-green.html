<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Data in the Rough - Articles by Katie Green</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" href="../theme/favicon.ico" />
        <link rel="apple-touch-icon" href="../theme/apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../theme/apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../theme/apple-touch-icon-iphone4.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../theme/apple-touch-icon-ipad3.png" />

        <link rel="stylesheet" href="../theme/css/bootstrap.min.css">
        <link rel="stylesheet" href="../theme/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="../theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="../theme/css/colorbox.css">

        <link rel="stylesheet" href="../theme/css/main.css">

        <script src="../theme/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div class="span9">
                    <div class="row">
                    

                        <div class="span7"> <!-- header -->
                            <!--[if lt IE 9]>
                                <p class="chromeframe alert alert-warning">You are using an <strong>outdated</strong> browser, and this site might not look best in it. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
                            <![endif]-->
                            <header id="site-header">
                                <div id="site-header-content">
                                    <h1>
                                        <a href="..">Data in the Rough</a>
                                        <small>
                                            <span class="divider">/</span> Exploring data science and visualization
                                        </small>
                                    </h1>
                                    <p>
                                        
                                    </p>
                                </div>
                            </header>
                        </div> <!-- header span -->
                    </div> <!-- header row -->

                    <div class="row"> <!-- content -->
                        <div class="content">
    <div id="index">
<div class="article-page">
    <div class="span7 offset2">
        <header class="article">
            <h2><a href="../posts/2014/03/poverty_choropleths/" rel="bookmark">Using choropleths to visualize poverty of minors vs. all age groups in America</a></h2>
            <time datetime="2014-03-25T00:00:00">
                Mar 25, 2014
            </time>
        </header>
    </div>

    <div class="span2">
    </div>

    <div class="span7">
        <section>
            <article class="entry">
    <div id="first-article">
        <p>I recently found this interesting dataset of <a href="http://www.census.gov/did/www/saipe/data/statecounty/data/2012.html">Small Area Income and Poverty Estimates</a>. It contains several variables concerning poverty rates across different counties in the United States. The ones I will focus on for this post are the percentage of people of all ages living in poverty, the percentage of individuals under 18 living in poverty, and the percentage of related children age 5-17 (school age) in families in poverty in 2012, which is the most recent year available. </p>
<p>I wanted to take a look at how poverty rates differ across these age groups in various counties and I thought using choropleths might be a good way to visualize those differences. (I found out after writing this that they actually do have choropleths on the census.gov website, but they took a different approach to theirs - they are in different color schemes with different quantize scales across age group and are each on a separate page. When doing this, I opted to look at the different age groups in the same color scheme, with the same quantize scale, next to one another, as I wanted to compare the groups.)</p>
<p>I am going to use this <a href="http://bl.ocks.org/mbostock/4060606">choropleth</a> designed by <a href="http://bost.ocks.org/mike/">Mike Bostock</a>, which I really liked for this purpose. I’m just going to make a few small modifications – swapping out the blue and green values in the color scheme (just for experimentation’s sake) and adding a black background since some of the lower values in this particular dataset end up getting washed out in the white, especially around the coastal areas. Oh, and clearly the data I use will be different!</p>
<p>The dataset also gave the national rate and the 90% confidence interval, so I’ll pass that along here.</p>
<p>Percentage of people in poverty, all ages: National rate: 15.9%; 90% confidence interval: 15.8%-16%</p>
<p><img alt="Key" src="images/povertypercent_allages.jpg" /></p>
<p>Percentage of people below age 18 under the poverty line: National rate: 22.6%; 90% confidence interval: 22.4% - 22.8%</p>
<p><img alt="Key" src="images/povertypercent_under18.jpg" /></p>
<p>Percentage of related 5-17 year olds in families in poverty: National rate: 21%; 90% confidence interval: 20.8% - 21.2%</p>
<p><img alt="Key" src="images/povertypercent_517infam.jpg" /></p>
<p>My first impression is that the rates look higher in the graphs containing the minors. It looks to me like there are more dark patches in those maps, particularly the under-18 one. I couldn’t really say anything conclusively yet so I decided to do some really simple statistics to see if my impression of an overall increase in poverty rates for younger populations according to this data might be correct.</p>
<p>First I got a mean and standard deviation, and ran a Shapiro-Wilk test to see if the data was normally distributed. The stats.shapiro command in SciPy returns a test statistic followed by a p-value. </p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">scipy</span> <span class="n">as</span> <span class="n">sp</span>
<span class="n">from</span> <span class="n">scipy</span> <span class="n">import</span> <span class="n">stats</span>
<span class="n">import</span> <span class="n">numpy</span> <span class="n">as</span> <span class="n">np</span>
<span class="n">import</span> <span class="n">pandas</span> <span class="n">as</span> <span class="n">pd</span>
<span class="n">from</span> <span class="n">pandas</span> <span class="n">import</span> <span class="n">read_csv</span>

<span class="n">pov</span> <span class="o">=</span> <span class="n">read_csv</span><span class="p">(</span><span class="s">&quot;poverty_comparison.csv&quot;</span><span class="p">)</span>

<span class="cp">#these are these arrays from the csv corresponding to each group, </span>
<span class="cp">#in order of county id </span>
<span class="n">pov18</span> <span class="o">=</span> <span class="n">pov</span><span class="p">[</span><span class="s">&quot;pov18&quot;</span><span class="p">]</span>
<span class="n">pov517</span> <span class="o">=</span> <span class="n">pov</span><span class="p">[</span><span class="s">&quot;pov517&quot;</span><span class="p">]</span>
<span class="n">povall</span> <span class="o">=</span> <span class="n">pov</span><span class="p">[</span><span class="s">&quot;povall&quot;</span><span class="p">]</span>

<span class="n">print</span> <span class="s">&quot;under 18:&quot;</span>
<span class="n">print</span> <span class="s">&quot;mean:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pov18</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;standard deviation:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">pov18</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;shapiro-wilk:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">pov18</span><span class="p">)</span>

<span class="n">print</span> <span class="s">&quot;5-17&quot;</span>
<span class="n">print</span> <span class="s">&quot;mean:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pov517</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;standard deviation:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">pov517</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;shapiro-wilk:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">pov517</span><span class="p">)</span>

<span class="n">print</span> <span class="s">&quot;all ages:&quot;</span>
<span class="n">print</span> <span class="s">&quot;mean:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">povall</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;standard deviation:&quot;</span>
<span class="n">print</span> <span class="n">np</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">povall</span><span class="p">)</span>
<span class="n">print</span> <span class="s">&quot;shapiro-wilk:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">povall</span><span class="p">)</span>
</pre></div>


<p>That code returned the following (plus some white space for clarity):</p>
<div class="highlight"><pre><span class="n">under</span> <span class="mi">18</span><span class="o">:</span>
<span class="nl">mean:</span>
<span class="mf">24.4720325712</span>
<span class="n">standard</span> <span class="n">deviation</span><span class="o">:</span>
<span class="mf">9.16095304016</span>
<span class="n">shapiro</span><span class="o">-</span><span class="n">wilk</span><span class="o">:</span>
<span class="p">(</span><span class="mf">0.9813428521156311</span><span class="p">,</span> <span class="mf">4.322406441501704e-20</span><span class="p">)</span>

<span class="mi">5</span><span class="o">-</span><span class="mi">17</span> <span class="n">in</span> <span class="n">fam</span><span class="o">:</span>
<span class="nl">mean:</span>
<span class="mf">22.5717507047</span>
<span class="n">standard</span> <span class="n">deviation</span><span class="o">:</span>
<span class="mf">8.89065270826</span>
<span class="n">shapiro</span><span class="o">-</span><span class="n">wilk</span><span class="o">:</span>
<span class="p">(</span><span class="mf">0.9775098562240601</span><span class="p">,</span> <span class="mf">4.492177891111914e-22</span><span class="p">)</span>

<span class="n">all</span> <span class="n">ages</span><span class="o">:</span>
<span class="nl">mean:</span>
<span class="mf">17.1698089571</span>
<span class="n">standard</span> <span class="n">deviation</span><span class="o">:</span>
<span class="mf">6.53900364074</span>
<span class="n">shapiro</span><span class="o">-</span><span class="n">wilk</span><span class="o">:</span>
<span class="p">(</span><span class="mf">0.9511524438858032</span><span class="p">,</span> <span class="mf">2.216994805890953e-31</span><span class="p">)</span>
</pre></div>


<p>You can see that these groups are not normally distributed (I also tried with log transforms of the data – still not normal). </p>
<p>So I just used the Wilcoxon signed-rank test, which is a nonparametric paired difference test, to look at the differences between the samples:
The code: </p>
<div class="highlight"><pre><span class="n">print</span> <span class="s">&quot;wilcoxon: under18 and 5-17:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">wilcoxon</span><span class="p">(</span><span class="n">pov18</span><span class="p">,</span><span class="n">pov517</span><span class="p">)</span>

<span class="n">print</span> <span class="s">&quot;wilcoxon: under18 and all ages:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">wilcoxon</span><span class="p">(</span><span class="n">pov18</span><span class="p">,</span><span class="n">povall</span><span class="p">)</span>

<span class="n">print</span> <span class="s">&quot;wilcoxon: 5-17 and all ages:&quot;</span>
<span class="n">print</span> <span class="n">stats</span><span class="p">.</span><span class="n">wilcoxon</span><span class="p">(</span><span class="n">povall</span><span class="p">,</span><span class="n">pov517</span><span class="p">)</span>
</pre></div>


<p>Returned the following:</p>
<div class="highlight"><pre><span class="n">wilcoxon</span><span class="o">:</span> <span class="n">under18</span> <span class="n">and</span> <span class="mi">5</span><span class="o">-</span><span class="mi">17</span><span class="o">:</span>
<span class="o">(</span><span class="mf">33434.5</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">)</span>

<span class="n">wilcoxon</span><span class="o">:</span> <span class="n">under18</span> <span class="n">and</span> <span class="n">all</span> <span class="n">ages</span><span class="o">:</span>
<span class="o">(</span><span class="mf">30549.5</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">)</span>

<span class="n">wilcoxon</span><span class="o">:</span> <span class="mi">5</span><span class="o">-</span><span class="mi">17</span> <span class="n">and</span> <span class="n">all</span> <span class="n">ages</span><span class="o">:</span>
<span class="o">(</span><span class="mf">81849.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">)</span>
</pre></div>


<p>Looks like my impression generated from the graphs were overall on the right track. According to this test, the overall poverty rates for individuals under 28 are significantly higher than both the all-ages group and the related 5-17-year-olds in families in poverty group, and the 5-17 group has significantly higher rates than the all-ages group.</p>
<p>Of course, this test does not differentially weight the different population sizes of the different counties, so that’s a disadvantage of my very basic approach here. Also, since the groups are overlapping, I think it would have been a good idea to compare the non-overlapping proportions of the groups, but I do not presently have those numbers. 
It would be interesting to see a plot of p-values when comparing two of the groups. Unfortunately, as I do not know how the data is distributed within the individual county groups I don't know what tests I should run. If anyone has an idea for how to work around this, I'm open to recommendations. I'd be interested to create a p-values choropleth in the future.
I also know there are certain disadvantages to using choropleths in general, such as the amount of space a certain area has to represent it being governed by geographical rather than population size. However, I think that the choropleth in this case does convey the right general impression, which is that minors are disproportionately affected by poverty in America according to this data from 2012. </p>
    </div>
 
            </article>
        </section>
    </div> <!-- span -->
</div>
<div class="article-page">
    <div class="span7 offset2">
        <header class="article">
            <h2><a href="../posts/2014/03/collaborative_filtering/" rel="bookmark">Collaborative item-based filtering for specific demographics</a></h2>
            <time datetime="2014-03-21T00:00:00">
                Mar 21, 2014
            </time>
        </header>
    </div>

    <div class="span2">
    </div>

    <div class="span7">
        <section>
            <article class="entry">
    <div class="article-summary">
        <!-- show full content instead of summary -->
        <p>This post is inspired by a situation I find myself in sometimes – going back home every year or so and deciding on movies to watch with my parents. I’ve lived on the opposite coast from them for about 6 years, so I don’t have a lot of data about their movie preferences as of late. Making them fill out a movie survey would be time consuming for them. I do know other things about them, though! I know their ages, I know their jobs, I know where they live. I also, obviously, have a lot of data about my own movie preferences. What if I could combine my movie preferences with their demographic info to get some recommendations for what movies we might want to watch together? </p>
<p>I am going to show you how to do this by adapting an algorithm from the book Programming Collective Intelligence: Building Smart Web 2.0 Applications by Toby Segaran. (Copyright 2007 Toby Segaran, 978-0-596-52932-1)</p>
<p>Segaran describes collaborative item-based filtering. He uses the Euclidean distance score  to find out how similar films are to one another, and which films are most similar to the films that someone rates highly.</p>
<p>The idea is that you can rate as many movies on this list as you like, and then get back a list of recommendations.</p>
<p>The process Segaran uses goes, very generally, like this:</p>
<ol>
<li>
<p 1_="1," 3="3" 3_:="3’:" 5_="5," Hereafter_:="Hereafter’:" Shell_:="Shell’:" Sweet="Sweet" _Gattaca_:="‘Gattaca’:" _Ghost="{‘Ghost" _Katie_:="‘Katie’:" _Robocop="‘Robocop" _The="‘The" in="in" the="the">Create a nested dictionary that matches movies to their rating for each rater. One rater entry for a small list of movies would look something like this:</p>
<ul>
<li>In the MovieLens set, the raters are ID numbers and not names. Segaran used names as an example for clarity; I borrowed that strategy from him.</li>
</ul>
</li>
<li>
<p>Write a function that returns the Euclidean distance between two points. You can also use the Pearson Correlation Score, but I’m not going to do that right now – I’ll get to the reason in a bit. </p>
</li>
<li>
<p>Write a function that inverts the dictionary to be one that matches raters to their rating for each movie. (e.g. {‘Ghost in the Shell’: {‘Katie’ : 5, ‘Judy’: 4, ‘Tommy’: 3}}) </p>
</li>
<li>
<p>Write a function that generates a list of similarity scores based on Euclidean distance between any given item and every other item in the dictionary. Then, the function should sort the results in order of similarity. This function uses the Euclidean distance function from #2.</p>
<ul>
<li>This brings us back to the reason I did not use the Pearson correlation score. When calculating similarity of raters, the Pearson score makes a lot of sense, because it corrects for score inflation – in other words, if one rater routinely is harsher than another but their relative scores of the different movies are similar, the Pearson score will calculate them as more similar than will the Euclidean distance score. Correcting with that sort of inflation seems very logical for rater similarity but seems a bit more complicated with item similarity. I don’t necessarily want two movies that have very different ratings but have the same relative preferedness among the raters to be scored as similar. I want to account for the fact that one movie gets higher ratings – I don’t want to correct for “movie inflation” because that information seems to have value. I’m absolutely open to being proven wrong on this decision.</li>
</ul>
</li>
<li>
<p>Write a function that “loops over every item and passes the transformed dictionary to the topMatches function (described in #3) to get the most similar items along with their similarity scores. Finally, it creates and returns a dictionary of items along with a list of their most similar items.” (from p. 23 of the book). </p>
</li>
<li>
<p>Finally, write a function that (barely paraphrasing, often quoting):</p>
<ul>
<li>Loops over the items rated by any given user (you get the ratings by user from the original, user-based dict)</li>
<li>Loops over items similar to this one as calculated by the previous function (but ignore the ones the user has already rated)</li>
<li>Calculates the weighted sum of rating times similarity</li>
<li>Sums all the similarities</li>
<li>Divides each total score by the total weighting – now you have an average</li>
<li>Returns the rankings from the highest to lowest.</li>
</ul>
</li>
</ol>
<p>At the end of this, you have a list of the movies with the highest score – the score representing how similar a movie is to the movies you rate most highly. </p>
<p>There’s a wonderful dataset called MovieLens from the University of Minnesota, (link here) on which Segaran runs his item-based filtering code, and I used it to implement his code.  I had a lot of fun doing this so I decided to play around a little bit…</p>
<p>…which brings us back to the demographic-based recommendation idea I mentioned at the beginning of this post. I’m going to focus just on age right now, with the idea that we can add in other demographic information as we wish, using the same method. I want a list of movies that are similar to my interests, based only on the age group that is similar to my parents.</p>
<p>This can be accomplished by telling the script to only look at ratings from a specific age bracket when calculating the Euclidean distance of two items. Here is Segaran’s function for Euclidean distance, slightly modified to incorporate a specific age bracket. Variable names are also changed from the book version to clarify that this code is being used for item, not user, similarity.</p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">pandas</span> <span class="n">as</span> <span class="n">pd</span>
<span class="n">from</span> <span class="n">pandas</span> <span class="n">import</span> <span class="n">read_csv</span>
<span class="n">from</span> <span class="n">math</span> <span class="n">import</span> <span class="n">sqrt</span>
<span class="n">from</span> <span class="n">prefs_maker</span> <span class="n">import</span> <span class="n">prefs</span>
<span class="n">from</span> <span class="n">item_comparison</span> <span class="n">import</span> <span class="n">transformPrefs</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">read_csv</span><span class="p">(</span><span class="err">&#39;</span><span class="n">user</span><span class="p">.</span><span class="n">csv</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">itemPrefs</span> <span class="o">=</span> <span class="n">transformPrefs</span><span class="p">(</span><span class="n">prefs</span><span class="p">)</span>

<span class="n">age</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">x</span> <span class="n">in</span> <span class="n">user</span><span class="p">.</span><span class="n">index</span><span class="o">:</span>
    <span class="n">age</span><span class="p">[</span><span class="n">user</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">user</span> <span class="n">id</span><span class="err">&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="err">&#39;</span><span class="n">age</span><span class="err">&#39;</span><span class="p">]</span>


<span class="n">def</span> <span class="n">sim_distance</span><span class="p">(</span><span class="n">itemPrefs</span><span class="p">,</span><span class="n">movie1</span><span class="p">,</span><span class="n">movie2</span><span class="p">,</span> <span class="n">agemin</span><span class="p">,</span> <span class="n">agemax</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span><span class="n">Get</span> <span class="n">the</span> <span class="n">list</span> <span class="n">of</span> <span class="n">shared</span> <span class="n">raters</span>
    <span class="n">sr</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">person</span> <span class="n">in</span> <span class="n">itemPrefs</span><span class="p">[</span><span class="n">movie1</span><span class="p">].</span><span class="n">keys</span><span class="p">()</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">age</span><span class="p">[</span><span class="n">person</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agemin</span> <span class="n">and</span> <span class="n">age</span><span class="p">[</span><span class="n">person</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">agemax</span><span class="o">:</span> 
            <span class="k">if</span> <span class="n">person</span> <span class="n">in</span> <span class="n">itemPrefs</span><span class="p">[</span><span class="n">movie2</span><span class="p">].</span><span class="n">keys</span><span class="p">()</span><span class="o">:</span>
                <span class="n">sr</span><span class="p">[</span><span class="n">person</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>


    <span class="err">#</span><span class="n">If</span> <span class="n">these</span> <span class="n">movies</span> <span class="n">have</span> <span class="n">no</span> <span class="n">raters</span> <span class="n">in</span> <span class="n">this</span> <span class="n">age</span> <span class="n">group</span> <span class="n">in</span> <span class="n">common</span><span class="p">,</span> <span class="k">return</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">sr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">:</span> <span class="k">return</span> <span class="mi">0</span>

    <span class="err">#</span><span class="n">Add</span> <span class="n">up</span> <span class="n">the</span> <span class="n">sums</span> <span class="n">of</span> <span class="n">squares</span> <span class="n">of</span> <span class="n">all</span> <span class="n">the</span> <span class="n">differences</span>
    <span class="n">sum_of_squares</span><span class="o">=</span><span class="n">sum</span><span class="p">([</span><span class="n">pow</span><span class="p">(</span><span class="n">itemPrefs</span><span class="p">[</span><span class="n">movie1</span><span class="p">][</span><span class="n">person</span><span class="p">]</span><span class="o">-</span><span class="n">itemPrefs</span><span class="p">[</span><span class="n">movie2</span><span class="p">]</span>
        <span class="p">[</span><span class="n">person</span><span class="p">],</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">person</span> <span class="n">in</span> <span class="n">sr</span><span class="p">])</span>

    <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">sqrt</span><span class="p">(</span><span class="n">sum_of_squares</span><span class="p">))</span>
</pre></div>


<p>Now you have a Euclidean distance between two movies, in which only a specific age bracket has been taken into account. Now you just need to make sure that you have those age inputs in any subsequent function that references the sim_distance function. That way, you can just input the ages into the final function that references all the other functions, and it’ll just plug them in wherever that sim_distance function is used. For example, here’s the modified version of function #4 and function #5:</p>
<p>Function #4: </p>
<div class="highlight"><pre><span class="err">#</span><span class="nx">returns</span> <span class="nx">the</span> <span class="nx">best</span> <span class="nx">matches</span> <span class="k">for</span> <span class="nx">person</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">prefs</span> <span class="nx">dictionary</span>
<span class="err">#</span><span class="nx">similarity</span> <span class="kd">function</span> <span class="nx">is</span> <span class="nx">an</span> <span class="nx">optional</span> <span class="nx">parameter</span>
<span class="nx">def</span> <span class="nx">topMatches</span><span class="p">(</span><span class="nx">itemPrefs</span><span class="p">,</span><span class="nx">movie</span><span class="p">,</span> <span class="nx">agemin</span><span class="p">,</span><span class="nx">agemax</span><span class="p">,</span> <span class="nx">similarity</span><span class="o">=</span><span class="nx">sim_distance</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">scores</span> <span class="o">=</span> <span class="cp">[</span><span class="p">(</span><span class="nx">similarity</span><span class="p">(</span><span class="nx">itemPrefs</span><span class="p">,</span><span class="nx">movie</span><span class="p">,</span><span class="nx">other</span><span class="p">,</span> <span class="nx">agemin</span><span class="p">,</span> <span class="nx">agemax</span><span class="p">),</span><span class="nx">other</span><span class="p">)</span> 
        <span class="nb">for</span> <span class="n">other</span> <span class="k">in</span> <span class="nx">itemPrefs</span> <span class="k">if</span> <span class="nx">other</span><span class="o">!=</span><span class="nx">movie</span><span class="cp">]</span>

    <span class="err">#</span><span class="nx">Sort</span> <span class="nx">the</span> <span class="nx">list</span> <span class="nx">so</span> <span class="nx">the</span> <span class="nx">highest</span> <span class="nx">scores</span> <span class="nx">appear</span> <span class="nx">at</span> <span class="nx">the</span> <span class="nx">top</span>
    <span class="nx">scores</span><span class="p">.</span><span class="nx">sort</span><span class="p">()</span>
    <span class="nx">scores</span><span class="p">.</span><span class="nx">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="nx">scores</span>
</pre></div>


<p>Function #5: </p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">calculateSimilarItems</span><span class="p">(</span><span class="n">itemPrefs</span><span class="p">,</span> <span class="n">agemin</span><span class="p">,</span> <span class="n">agemax</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span><span class="n">Initialize</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">dict</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">itemPrefs</span><span class="o">:</span>
        <span class="err">#</span><span class="n">Status</span> <span class="n">updates</span> <span class="k">for</span> <span class="n">large</span> <span class="n">datasets</span>
        <span class="n">c</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">%</span><span class="mi">100</span><span class="o">==</span><span class="mi">0</span><span class="o">:</span> <span class="n">print</span> <span class="s">&quot;%d / %d&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">len</span><span class="p">(</span><span class="n">itemPrefs</span><span class="p">))</span>
        <span class="err">#</span><span class="n">Find</span> <span class="n">the</span> <span class="n">most</span> <span class="n">similar</span> <span class="n">items</span> <span class="n">to</span> <span class="n">this</span> <span class="n">one</span> <span class="n">based</span> <span class="n">on</span> <span class="n">our</span> <span class="n">age</span><span class="o">-</span><span class="n">based</span> 
        <span class="err">#</span><span class="n">similarity</span> <span class="n">score</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">topMatches</span><span class="p">(</span><span class="n">itemPrefs</span><span class="p">,</span><span class="n">item</span><span class="p">,</span> <span class="n">agemin</span><span class="p">,</span> <span class="n">agemax</span><span class="p">,</span> 
            <span class="n">similarity</span><span class="o">=</span><span class="n">sim_distance</span><span class="p">)</span>
        <span class="err">#</span><span class="n">make</span> <span class="n">an</span> <span class="n">entry</span> <span class="n">in</span> <span class="n">the</span> <span class="n">dict</span> <span class="k">for</span> <span class="n">each</span> <span class="n">movie</span><span class="p">,</span> <span class="n">and</span> <span class="n">make</span> <span class="n">the</span> <span class="n">value</span> <span class="k">for</span> 
        <span class="err">#</span><span class="n">that</span> <span class="n">movie</span> <span class="n">its</span> <span class="n">matches</span> <span class="n">in</span> <span class="n">order</span> <span class="n">of</span> <span class="n">similarity</span>
        <span class="n">result</span><span class="p">[</span><span class="n">item</span><span class="p">]</span><span class="o">=</span><span class="n">scores</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>


<p>Function #6:</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">getRecommendedItems</span><span class="p">(</span><span class="n">prefs</span><span class="p">,</span> <span class="n">itemMatch</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span><span class="o">:</span>
    <span class="n">userRatings</span> <span class="o">=</span> <span class="n">prefs</span><span class="p">[</span><span class="n">user</span><span class="p">]</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">totalSim</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="err">#</span><span class="n">Loop</span> <span class="n">over</span> <span class="n">items</span> <span class="n">rated</span> <span class="n">by</span> <span class="n">this</span> <span class="n">user</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">rating</span><span class="p">)</span> <span class="n">in</span> <span class="n">userRatings</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="o">:</span>

        <span class="err">#</span><span class="n">Loop</span> <span class="n">over</span> <span class="n">items</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">this</span> <span class="n">one</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">similarity</span><span class="p">,</span><span class="n">item2</span><span class="p">)</span> <span class="n">in</span> <span class="n">itemMatch</span><span class="p">[</span><span class="n">item</span><span class="p">]</span><span class="o">:</span>

            <span class="err">#</span><span class="n">Ignore</span> <span class="k">if</span> <span class="n">this</span> <span class="n">user</span> <span class="n">has</span> <span class="n">already</span> <span class="n">rated</span> <span class="n">this</span> <span class="n">item</span>
            <span class="k">if</span> <span class="n">item2</span> <span class="n">in</span> <span class="n">userRatings</span><span class="o">:</span> <span class="k">continue</span>

            <span class="err">#</span><span class="n">Weighted</span> <span class="n">sum</span> <span class="n">of</span> <span class="n">rating</span> <span class="n">times</span> <span class="n">similarity</span>
            <span class="n">scores</span><span class="p">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">scores</span><span class="p">[</span><span class="n">item2</span><span class="p">]</span><span class="o">+=</span><span class="n">similarity</span><span class="o">*</span><span class="n">rating</span>

            <span class="err">#</span><span class="n">Sum</span> <span class="n">of</span> <span class="n">all</span> <span class="n">the</span> <span class="n">similarities</span>
            <span class="n">totalSim</span><span class="p">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">totalSim</span><span class="p">[</span><span class="n">item2</span><span class="p">]</span><span class="o">+=</span><span class="n">similarity</span>

    <span class="err">#</span><span class="n">Divide</span> <span class="n">each</span> <span class="n">total</span> <span class="n">score</span> <span class="n">by</span> <span class="n">total</span> <span class="n">weighting</span> <span class="n">to</span> <span class="n">get</span> <span class="n">an</span> <span class="n">average</span>
    <span class="n">rankings</span><span class="o">=</span><span class="p">[(</span><span class="n">score</span><span class="o">/</span><span class="n">totalSim</span><span class="p">[</span><span class="n">item</span><span class="p">],</span><span class="n">item</span><span class="p">)</span> 
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span><span class="n">score</span> <span class="n">in</span> <span class="n">scores</span><span class="p">.</span><span class="n">items</span><span class="p">()]</span>


    <span class="err">#</span><span class="n">Return</span> <span class="n">the</span> <span class="n">rankings</span> <span class="n">from</span> <span class="n">highest</span> <span class="n">to</span> <span class="n">lowest</span>
    <span class="n">rankings</span><span class="p">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">rankings</span><span class="p">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">rankings</span>
</pre></div>


<p>Now, you can calculate the item similarity dictionary, get a list of movies, and their ratings, similar to the tastes of any given user, and specific to a certain demographic!</p>
<p>I did not actually rate these movies, so I am going to cheat and choose an arbitrary 24-year-old from this dataset – let’s say my 24-year-old friend, rater number 4, is going to hang out with my parents instead of me. The input to obtain the first 30 movie recommendations would look like this:</p>
<div class="highlight"><pre><span class="n">itemMatch</span> <span class="o">=</span> <span class="n">calculateSimilarItems</span><span class="p">(</span><span class="n">prefs</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>

<span class="n">getRecommendedItems</span><span class="p">(</span><span class="n">prefs</span><span class="p">,</span> <span class="n">itemMatch</span><span class="p">,</span> <span class="mi">4</span><span class="p">)[</span><span class="mi">0</span><span class="o">:</span><span class="mi">30</span><span class="p">]</span>
</pre></div>


<p>(I’m not going to get more specific with my parents’ age range because that would be rude.)</p>
<p>The output would be:</p>
<p>[(5.0, 'Temptress Moon (Feng Yue) (1996)'), (5.0, 'Shooting Fish (1997)'), (5.0, 'Letter From Death Row, A (1998)'), (5.0, 'Legal Deceit (1997)'), (5.0, 'Frankie Starlight (1995)'), (5.0, 'Convent, The (Convento, O) (1995)'), (5.0, 'Children of the Revolution (1996)'), (5.0, 'Chairman of the Board (1998)'), (4.910804627925347, 'Unhook the Stars (1996)'), (4.833333333333333, 'High School High (1996)'), (4.833333333333333, 'American Strays (1996)'), (4.818181818181818, 'Hotel de Love (1996)'), (4.7894736842105265, 'American Buffalo (1996)'), (4.749999999999999, 'Man of the House (1995)'), (4.749999999999999, 'Major Payne (1994)'), (4.749999999999999, 'Low Down Dirty Shame, A (1994)'), (4.749999999999999, 'Lightning Jack (1994)'), (4.749999999999999, 'I Love Trouble (1994)'), (4.749999999999999, 'Cops and Robbersons (1994)'), (4.737704918032787, 'Bloodsport 2 (1995)'), (4.703703703703704, 'Two Deaths (1995)'), (4.673094212473764, 'Beavis and Butt-head Do America (1996)'), (4.666666666666667, 'Young Guns II (1990)'), (4.666666666666667, 'Little City (1998)'), (4.654320987654322, 'Solo (1996)'), (4.625, 'Spice World (1997)'), (4.619052786367143, 'Wizard of Oz, The (1939)'), (4.611078667402663, 'Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb (1963)'), (4.609392286807124, 'Rent-a-Kid (1995)'), (4.608348198368234, 'Babe (1995)')]</p>
<p>You only have to create the itemMatch dict once for every age group (in fact, you can set a different variable name for different age groups if you want to come back to them), and then you can just run that second line for the specific user, and update the itemMatch dictionary if you end up entering new subjects.</p>
<p>This could all be conducted for any demographic. You can set up the function to take a certain zip code as input, or an occupation, and thereby control the raters accounted for in the Euclidean distance score between items. </p>
<p>I’m looking forward to inputting my own movie ratings and actually running this for myself instead of my anonymous contemporary.</p>
<p>I hope you enjoyed this. Have a good week, everyone. </p>
    </div>
 
            </article>
        </section>
    </div> <!-- span -->
</div>
<div class="article-page">
    <div class="span7 offset2">
        <header class="article">
            <h2><a href="../posts/2014/03/githubpages/" rel="bookmark">Putting a Pelican blog on Github Pages</a></h2>
            <time datetime="2014-03-12T00:00:00">
                Mar 12, 2014
            </time>
        </header>
    </div>

    <div class="span2">
    </div>

    <div class="span7">
        <section>
            <article class="entry">
    <div class="article-summary">
        <!-- show full content instead of summary -->
        <p>Hello, everyone!</p>
<p>I'm writing up my first d3.js post right now, but I thought that I'd do a quick little post on how I 
actually published this Pelican blog through GitHub Pages. 
For someone publishing their first-ever Pelican blog, perhaps this will be helpful.</p>
<p>Here's what I did after creating the files for the blog as per the Pelican documentation:</p>
<p>I created a new empty directory called dataintherough (the directory containing all of my 
blog code is called "blog_code": this is a separate directory).</p>
<p>I created a new repo called dataintherough on GitHub by going to my repositories page and 
clicking the green "New" Button.</p>
<p>I selected the option to initialize with README.</p>
<p>Then I followed the following instructions GitHub gave once the repo was created, from 
 inside the the empty directory:</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/katiefg/testblog.git</span>
</pre></div>


<p>Now my newly created repo had a remote origin and a "master" branch. My master branch 
contains my Pelican code. You can push your Pelican code to your own master branch if you like. At this point, what I really needed to do was create a new branch just for the output.</p>
<ul>
<li>Pelican reminder: your output is stored wherever your OUTPUT_PATH leads to in your config file. For me, 
this directory is just called "output". To generate this output whenever I've edited the content 
or Pelican code, I run:  <div class="highlight"><pre><span class="n">pelican</span> <span class="o">-</span><span class="n">s</span> <span class="o">&lt;</span><span class="n">name</span> <span class="n">of</span> <span class="n">your</span> <span class="n">config</span> <span class="n">file</span><span class="p">(</span><span class="n">mine</span> <span class="n">is</span> <span class="n">pelicanconf</span><span class="p">.</span><span class="n">py</span><span class="p">)</span><span class="o">&gt;</span> 
<span class="n">make</span> <span class="n">html</span>
</pre></div>


</li>
</ul>
<p>Back to that new branch.</p>
<p>I wanted to create this branch in my new, still-empty directory, dataintherough.</p>
<p>I did this using some very useful commands I found on <a href="https://help.github.com/articles/creating-project-pages-manually">this page</a>.
The relevant part on that page starts at "Creating a gh-pages branch". Here's the line, from within that empty directory:</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">checkout</span> <span class="o">--</span><span class="n">orphan</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
</pre></div>


<p>This created a new, orphan branch, and I was now inside of that branch.
My blog output was ready, so I copied it into the empty directory. In my case, from inside 
the dataintherough directory, this looked like:</p>
<div class="highlight"><pre><span class="n">cp</span> <span class="p">..</span><span class="o">/</span><span class="n">blog_code</span><span class="o">/</span><span class="n">output</span><span class="o">/*</span>
</pre></div>


<p>Now my formerly empty dataintherough directory was full of output.</p>
<p>It was time to add it, and commit it.</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">add</span> <span class="p">.</span>
<span class="n">git</span> <span class="n">commit</span>
</pre></div>


<p>Here, I was asked for a message. I typed something relevant - perhaps "my new blog". 
Then, I pressed  &lt;esc&gt;, typed ":w", pressed return, typed ":q", and pressed return again.
Finally, I pushed what I had just committed:</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
</pre></div>


<p>I waited for about ten minutes for the page to load the first time, and then went to the page.
If you do this, your url will be https://&lt;yourusername&gt;.github.io/&lt;reponame&gt;. 
You can see that my URL follows this format (although you do have the option in GitHub Pages of using a custom domain!)</p>
<p>Also, if you substitute the whole "Pelican output" part of this process with any valid 
html, you can use the same process. Just make a directory for it, initialize git, create a remote, make a new branch, get the code in 
there, add, commit, and push.</p>
<p><em>Updating the blog</em></p>
<p>Of course, blogs get updated frequently. GitHub Pages makes it easy to do this. You can work on and test the blog in from your working 
directory (blog_code), then when you've got your output ready, you can just replace the 
contents of the GitHub directory (dataintherough) and repeat the add/push/commit process.</p>
<p>If any of this doesn't work please let me know and hopefully I can help. I'd also like to thank two people who work at EdX, named Feanil and John, who were particularly helpful in this endeavor at the March Boston Python User Group project night.</p>
<p>I'm looking forward to carrying out this update process many times as I continue to blog!</p>
    </div>
 
            </article>
        </section>
    </div> <!-- span -->
</div>
<div class="article-page">
    <div class="span7 offset2">
        <header class="article">
            <h2><a href="../posts/2014/03/introduction/" rel="bookmark">Introduction</a></h2>
            <time datetime="2014-03-10T00:00:00">
                Mar 10, 2014
            </time>
        </header>
    </div>

    <div class="span2">
    </div>

    <div class="span7">
        <section>
            <article class="entry">
    <div class="article-summary">
        <!-- show full content instead of summary -->
        <p>Hello, everyone, and welcome.</p>
<p>In my recent exploration of data science and visualization tools and attempts to apply them, I have found that there is rarely one resource that explains 100% of what needs to be done – and I’m glad, because the search for the information across multiple sources is half the fun! I hope that I can add to the pool of resources and examples available on the internet in a productive way, and that perhaps something I do on here will be the missing piece in someone else’s puzzle.</p>
<p>I also received some valuable advice, stating that a good way to begin with a blog is to write as though your audience were yourself, two or three weeks ago. This way, you have a better grasp of the issues that are relevant when learning a new tool. Following that advice is how I plan to start this blog. </p>
<p>Over the next several posts I’m going to be heavily referencing some really great resources I’ve found, so it seems this is as good a place as any to introduce them.</p>
<ul>
<li>
<p><a href="http://chimera.labs.oreilly.com/books/1230000000345">Interactive Data Visualization for the Web: An Introduction to Designing with D3</a>, by Scott Murray.
This is the book I used to familiarize myself with D3. It has excellent code examples and is very user-friendly. Since this is where a lot of my D3 knowledge comes from, I’ll be coming back to it in future posts.</p>
</li>
<li>
<p><a href="http://shop.oreilly.com/product/9780596529321.do">Programming Collective Intelligence: Building Smart Web 2.0 Applications</a>, by Toby Segaran.
 I will be working through some of the algorithms described in this book on this blog, and looking a bit more at their implementation.</p>
</li>
<li>
<p>This link is on the links page too: I’ll be making extensive use of Mike Bostock’s <a href="https://github.com/mbostock/d3/wiki/Gallery">D3 Gallery</a> for examples and inspiration. More specific references from within the gallery to follow!</p>
</li>
</ul>
<p>Thank you again for stopping by and please feel free to contact me. I hope you enjoy your time here.</p>
<p>All the best,</p>
<p>Katie</p>
    </div>
 
            </article>
        </section>
    </div> <!-- span -->
</div>
<div class="span7 offset2">
    <p class="paginator">
        Page 1 / 1
    </p>
</div>
    </div>
                        </div>
                    </div> <!-- content row -->

                    <div class="row"> <!-- footer -->
                        <div class="span7 offset2">
                            <footer id="site-footer">
                                <p>
                                    <a href="" target="_blank">
                                        
                                    </a> Katie Green /
                                    <a href="../">Archives</a>
                                </p>
                                <p>
                                    Powered by
                                    <a href="https://github.com/getpelican/pelican" target="_blank">
                                        Pelican
                                    </a>
                                    /
                                    Source code on
                                    <a href="http://github.com/siovene/iovene.com" target="blank">
                                        GitHub
                                    </a>
                                    /
                                    Theme <code>Lannisport</code>, also on
                                    <a href="http://github.com/siovene/lannisport" target="_blank">
                                        GitHub
                                    </a>
                                </p>
                            </footer>
                        </div> <!-- footer span -->
                    </div> <!-- footer row -->
                </div> <!-- header+content+footer span -->

                <div class="span3">
                    <aside class="affix">
                        <div id="sidebar">
                            <div id="social-icons">
                                    <span class="social-icon">
                                        <a href="http://www.linkedin.com/pub/katie-green/12/651/70a" target="_blank" title="LinkedIn">
                                            <i class="icon-linkedin"></i>
                                        </a>
                                    </span>
                                    <span class="social-icon">
                                        <a href="https://twitter.com/katie_fg" target="_blank" title="Twitter">
                                            <i class="icon-twitter"></i>
                                        </a>
                                    </span>
                            </div>

                            <div id="navigation">
<nav>
	<h2>Pages</h2>
	<ul>
		<li>
			<ul>
				<li>
					<a href="..">Blog</a>
				</li>

					<li>
						<a href="../pages/about.html">About</a>
					</li>
					<li>
						<a href="../pages/blogs.html">Links and blogs</a>
					</li>
					<li>
						<a href="../pages/contact.html">Contact</a>
					</li>
					<li>
						<a href="../pages/license.html">License</a>
					</li>
			</ul>
		</li>
	</ul>
</nav>

<nav>
	<h2>Categories</h2>
	<ul>
		<li>
			<ul>
					<li>
						<a href="../category/choropleths.html">Choropleths</a>
					</li>
					<li>
						<a href="../category/collaborative-filtering.html">Collaborative filtering</a>
					</li>
					<li>
						<a href="../category/data-science.html">data science</a>
					</li>
					<li>
						<a href="../category/pelican-blogging.html">Pelican blogging</a>
					</li>
			</ul>
		</li>
	</ul>
</nav>                            </div>
                        </div> <!-- sidebar -->

                        <p id="back-to-top">
                            <a href="#">
                                <i class="icon-double-angle-up"></i> Back to top
                            </a>
                        </p>

                    </aside>
                </div> <!-- logo+navigation span -->
            </div> <!-- row -->

        </div> <!-- /container -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../theme/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
        <script>$('body').popover || document.write('<script src="../theme/js/vendor/bootstrap.min.js"><\/script>')</script>

        <script src="../theme/js/jquery.captions.js"></script>
        <script src="../theme/js/vendor/jquery.colorbox-min.js"></script>

        <script src="../theme/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount',''],['_trackPageview'],['_trackPageLoadTime'],['_gat._anonymizeIp']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>